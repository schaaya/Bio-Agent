"Natural Language Query","SQL Query"
"Get all sites","SELECT * FROM Site;"
"List all levels in a facility","SELECT * FROM Level WHERE FacilityId = '12345';"
"Get the timestamp and value of all Temperature measurements for a specific unit","SELECT timestamp, value FROM IAQ WHERE measurement = 'temp';"
"Get the timestamp and value of all Carbon Dioxide measurements for a specific unit","SELECT timestamp, value FROM IAQ WHERE measurement = 'CO2';"
"List all SpaceIds in a specific zone","SELECT SpaceId FROM Space WHERE Zone = 'some_zone';"
"Find all unique SpaceTypes","SELECT DISTINCT SpaceType FROM Space;"
"List all facilities with a specific SourceSystemId","SELECT * FROM Facility WHERE SourceSystemId = 'some_source_system_id';"
"Get the coordinates of all spaces in a facility","SELECT SpaceId, CoOrdinates FROM Space WHERE FacilityId = 'some_facility_id';"
"List all space descriptions in a facility","SELECT SpaceDescription FROM Space WHERE FacilityId = 'some_facility_id';"
"Find the time difference for a specific facility","SELECT TimeDiff FROM Facility WHERE FacilityId = 'some_facility_id';"
"List the capacities of all levels in descending order","SELECT Capacity FROM Level ORDER BY Capacity DESC;"
"Get the maximum capacity of all spaces in a facility","SELECT MAX(Capacity) FROM Space WHERE FacilityId = 'some_facility_id';"
"List all facilities that operate in a specific time zone","SELECT * FROM Facility WHERE TimeZone = 'some_time_zone';"
"Find the average value of all IAQ measurements in a facility","SELECT AVG(value) FROM IAQ WHERE FacilityId = 'some_facility_id';"
"List all unique units in IAQ measurements","SELECT DISTINCT unit FROM IAQ;"
"Count the number of spaces in a facility","SELECT COUNT(*) FROM Space WHERE FacilityId = 'some_facility_id';"
"List all facilities that have a specific environmental variable","SELECT * FROM Facility WHERE EnvVariables LIKE '%some_variable%';"
"Get all spaces with a capacity greater than 50","SELECT * FROM Space WHERE Capacity > 50;"
"List all levels in a facility sorted by capacity in ascending order","SELECT * FROM Level WHERE FacilityId = 'some_facility_id' ORDER BY Capacity ASC;"
"Count the number of IAQ measurements from a specific vendor","SELECT COUNT(*) FROM IAQ WHERE vendor = 'some_vendor';"
"List all facilities where the working hours start after 9 AM","SELECT * FROM Facility WHERE WorkingHoursFrom > 9;"
"Find the minimum social distance requirement for all facilities","SELECT MIN(MinSocialDistance) FROM Facility;"
"List all spaces that have a specific geometry type","SELECT * FROM Space WHERE GeometryType = 'some_geometry_type';"
"Find the LonLat for a specific facility","SELECT LonLat FROM Facility WHERE FacilityId = 'some_facility_id';"
"Get all facilities that have a specific address","SELECT * FROM Facility WHERE Address = 'some_address';"
"Find the total number of levels in a specific facility","SELECT COUNT(*) FROM Level WHERE FacilityId = 'some_facility_id';"
"List all spaces in a specific facility and level","SELECT * FROM Space WHERE FacilityId = 'some_facility_id' AND LevelId = 'some_level_id';"
"Get the SpaceName for a given SpaceId","SELECT SpaceName FROM Space WHERE SpaceId = 'some_space_id';"
"List all spaces with a maximum capacity less than 100","SELECT * FROM Space WHERE MaxCapacity < 100;"
"Get the highest value of IAQ measurements in a facility","SELECT MAX(value) FROM IAQ WHERE FacilityId = 'some_facility_id';"
"Find the average capacity of all levels in a facility","SELECT AVG(Capacity) FROM Level WHERE FacilityId = 'some_facility_id';"
"List all levels that have a SourceSystemId matching a specific value","SELECT * FROM Level WHERE SourceSystemId = 'some_source_system_id';"
"Count the number of unique vendors in IAQ measurements","SELECT COUNT(DISTINCT vendor) FROM IAQ;"
"List all zones in a facility","SELECT DISTINCT Zone FROM Space WHERE FacilityId = 'some_facility_id';"
"Get the time zone of a specific site","SELECT TimeZone FROM Facility WHERE SiteId = 'some_site_id';"
"Find all levels with a capacity less than 50","SELECT * FROM Level WHERE Capacity < 50;"
"Count the number of spaces in each level of a facility","SELECT LevelId, COUNT(*) FROM Space WHERE FacilityId = 'some_facility_id' GROUP BY LevelId;"
"List all the environmental route variables for a facility","SELECT EnvIRouteVariables FROM Facility WHERE FacilityId = 'some_facility_id';"
"Find the SpaceType of a specific space","SELECT SpaceType FROM Space WHERE SpaceId = 'some_space_id';"
"List all unique time zones across all facilities","SELECT DISTINCT TimeZone FROM Facility;"
"Get the IAQ measurements of a specific space sorted by timestamp in ascending order","SELECT * FROM IAQ WHERE SpaceId = 'some_space_id' ORDER BY timestamp ASC;"
"Find all spaces that have the same capacity as a given space","SELECT * FROM Space WHERE Capacity = (SELECT Capacity FROM Space WHERE SpaceId = 'some_space_id');"
"List the total number of facilities in a specific site","SELECT COUNT(*) FROM Facility WHERE SiteId = 'some_site_id';"
"Find the average value of IAQ measurements for a specific unit in a facility","SELECT AVG(value) FROM IAQ WHERE unit = 'some_unit' AND FacilityId = 'some_facility_id';"
"List all facilities that have a specific vendor","SELECT * FROM Facility WHERE Vendors LIKE '%some_vendor%';"
"Get the number of spaces with each SpaceType in a facility","SELECT SpaceType, COUNT(*) FROM Space WHERE FacilityId = 'some_facility_id' GROUP BY SpaceType;"
"Find the latest IAQ measurement for a specific space","SELECT * FROM IAQ WHERE SpaceId = 'some_space_id' ORDER BY timestamp DESC LIMIT 1;"
"Count the number of levels that have a specific SourceSystemId","SELECT COUNT(*) FROM Level WHERE SourceSystemId = 'some_source_system_id';"
"List all facilities that have a minimum social distance requirement greater than 2","SELECT * FROM Facility WHERE MinSocialDistance > 2;"
"Get the oldest IAQ measurement for a specific space","SELECT * FROM IAQ WHERE SpaceId = 'some_space_id' ORDER BY timestamp ASC LIMIT 1;"
"List the number of spaces in each zone of a facility","SELECT Zone, COUNT(*) FROM Space WHERE FacilityId = 'some_facility_id' GROUP BY Zone;"
"Find all spaces that are either squares or circles in geometry type","SELECT * FROM Space WHERE GeometryType IN ('Square', 'Circle');"
"Count the number of facilities that start working before 8 AM","SELECT COUNT(*) FROM Facility WHERE WorkingHoursFrom < 8;"
"Get the maximum and minimum capacity of all levels in a facility","SELECT MAX(Capacity), MIN(Capacity) FROM Level WHERE FacilityId = 'some_facility_id';"
"List all levels in a facility that have a capacity greater than the average capacity of that facility","SELECT * FROM Level WHERE FacilityId = 'some_facility_id' AND Capacity > (SELECT AVG(Capacity) FROM Level WHERE FacilityId = 'some_facility_id');"
"Find all facilities that have both 'AC' and 'Heater' in their environmental variables","SELECT * FROM Facility WHERE EnvVariables LIKE '%AC%' AND EnvVariables LIKE '%Heater%';"
"Get the ZoneId for a given Zone name in a specific facility","SELECT ZoneId FROM Space WHERE Zone = 'some_zone_name' AND FacilityId = 'some_facility_id';"
"Find the LevelId for a given SpaceId","SELECT LevelId FROM Space WHERE SpaceId = 'some_space_id';"
"Find the name of the facility where a particular space is located","SELECT Facility.FacilityName FROM Facility JOIN Space ON Facility.FacilityId = Space.FacilityId WHERE Space.SpaceId = 'some_space_id';"
"List all spaces and their corresponding level names in a given facility","SELECT Space.SpaceName, Level.LevelName FROM Space JOIN Level ON Space.LevelId = Level.LevelId WHERE Space.FacilityId = 'some_facility_id';"
"Find all spaces that have IAQ measurements above a certain value","SELECT Space.SpaceName FROM Space JOIN IAQ ON Space.SpaceId = IAQ.SpaceId WHERE IAQ.value > some_value;"
"Get all IAQ measurements for a particular space including the space name","SELECT Space.SpaceName, IAQ.* FROM Space JOIN IAQ ON Space.SpaceId = IAQ.SpaceId WHERE IAQ.SpaceId = 'some_space_id';"
"List the total number of spaces in each facility","SELECT Facility.FacilityName, COUNT(Space.SpaceId) FROM Facility LEFT JOIN Space ON Facility.FacilityId = Space.FacilityId GROUP BY Facility.FacilityName;"
"Find the facility and site name for a given IAQ uuid","SELECT Facility.FacilityName, Site.SiteName FROM Facility JOIN IAQ ON Facility.FacilityId = IAQ.FacilityId JOIN Site ON Facility.SiteId = Site.SiteId WHERE IAQ.uuid = 'some_uuid';"
"Get the average IAQ value per vendor for a specific facility","SELECT IAQ.vendor, AVG(IAQ.value) FROM IAQ JOIN Facility ON IAQ.FacilityId = Facility.FacilityId WHERE Facility.FacilityId = 'some_facility_id' GROUP BY IAQ.vendor;"
"List all sites along with the total capacity of their facilities","SELECT Site.SiteName, SUM(Facility.Capacity) FROM Site LEFT JOIN Facility ON Site.SiteId = Facility.SiteId GROUP BY Site.SiteName;"
"Find the highest and lowest levels based on capacity in each facility","SELECT Facility.FacilityName, MAX(Level.Capacity), MIN(Level.Capacity) FROM Facility JOIN Level ON Facility.FacilityId = Level.FacilityId GROUP BY Facility.FacilityName;"
"List all the spaces that share the same level as a specific space","SELECT A.SpaceName FROM Space AS A JOIN Space AS B ON A.LevelId = B.LevelId WHERE B.SpaceId = 'some_space_id';"
"Find all FacilityNames that have IAQ measurements below a certain value for a specific unit","SELECT DISTINCT Facility.FacilityName FROM Facility JOIN IAQ ON Facility.FacilityId = IAQ.FacilityId WHERE IAQ.unit = 'some_unit' AND IAQ.value < some_value;"
"Find the facility with the most levels","SELECT FacilityId, COUNT(*) as num_levels FROM Level GROUP BY FacilityId ORDER BY num_levels DESC LIMIT 1;"
"Get all FacilityNames and their corresponding WorkingHours where at least one level has a capacity over 100","SELECT DISTINCT Facility.FacilityName, Facility.WorkingHoursFrom, Facility.WorkingHoursTo FROM Facility JOIN Level ON Facility.FacilityId = Level.FacilityId WHERE Level.Capacity > 100;"
"Find all spaces that have the same capacity as the average capacity of a specific facility's spaces","SELECT Space.SpaceName FROM Space WHERE Space.FacilityId = 'some_facility_id' AND Space.Capacity = (SELECT AVG(Capacity) FROM Space WHERE FacilityId = 'some_facility_id');"
"List all facilities that have levels with more than 100 in capacity and also have spaces with more than 50 in capacity","SELECT DISTINCT Facility.FacilityName FROM Facility JOIN Level ON Facility.FacilityId = Level.FacilityId JOIN Space ON Facility.FacilityId = Space.FacilityId WHERE Level.Capacity > 100 AND Space.Capacity > 50;"
"What is the total number of visits across Terminal A, B, C, and E for July 2024?","Select Sum(od.Cnt) From OccupancyDaily od Join Facility f ON f.FacilityId = od.FacilityId Join [Space] s ON s.Spaceid = od.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and od.[date] BETWEEN '2024-07-01' and '2024-07-31'"
"Which terminal was the busiest in March 2024?","Select Top 1 f.FacilityName as Terminal, Sum(od.Cnt) From OccupancyDaily od Join Facility f ON f.FacilityId = od.FacilityId Join [Space] s ON s.Spaceid = od.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and od.[date] BETWEEN '2024-03-01' and '2024-03-31' Group By f.FacilityName Order bY Sum(od.Cnt) Desc"
"What was the average number of visits per day across Terminal A, B, C, and E for July 2024?","SELECT ROUND (SUM(od.Cnt) / Cast(DATEDIFF(DAY,'2024-07-01' , '2024-07-31') + 1 AS FLOAT) ,2) AS AverageVisitsPerDay FROM OccupancyDaily od JOIN Facility f ON f.FacilityId = od.FacilityId JOIN [Space] s ON s.SpaceId = od.SpaceId WHERE f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') AND od.[date] BETWEEN '2024-03-01' AND '2024-03-31'"
"On which days did Terminal A, B, C, and E have the peak usage in March 2024?","Select f.FacilityName, od.day, Sum(od.Cnt) From OccupancyDaily od Join Facility f ON f.FacilityId = od.FacilityId Join [Space] s ON s.Spaceid = od.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and od.[date] BETWEEN '2024-03-01' and '2024-03-31' GROUP By F.FacilityName, od.[day] Order By f.FacilityName , 3 Desc"
"At what hours did Terminal A, B, C, and E have the highest occupancy in March 2024?","Select f.FacilityName, ocs.hours, Sum(ocs.occupancy) From OccupancyCleaningSummary ocs Join Facility f ON f.FacilityId = ocs.FacilityId Join [Space] s ON s.Spaceid = ocs.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and ocs.[date] BETWEEN '2024-03-01' and '2024-03-31' GROUP By F.FacilityName, ocs.[hours] Order By f.FacilityName , 3 Desc"
"What are the total visits across all terminals for March 2024?","Select f.FacilityName, Sum(od.Cnt) From OccupancyDaily od Join Facility f ON f.FacilityId = od.FacilityId Join [Space] s ON s.Spaceid = od.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and od.[date] BETWEEN '2024-03-01' and '2024-03-31' Group By f.FacilityName Order BY F.FacilityName"
"What is the busiest restroom across all terminals for March 2024?","Select f.FacilityName, s.SpaceName, Sum(od.Cnt) From OccupancyDaily od Join Facility f ON f.FacilityId = od.FacilityId Join [Space] s ON s.Spaceid = od.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and od.[date] BETWEEN '2024-03-01' and '2024-03-31' Group By f.FacilityName, s.SpaceName Order bY f.FacilityName, 3 desc"
"What is the overall feedback across Terminals A, B, C, E for April 2024?","Select Sum(Total) From FeedBackSummaryDaily fbsd Join Facility f ON f.FacilityId = fbsd.FacilityId Join [Space] s ON s.Spaceid = fbsd.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbsd.[date] BETWEEN '2024-04-01' and '2024-04-30'"
"How many 'Excellent', 'Average', and 'Poor' ratings were received in April 2024 across Terminals A, B, C, and E?","Select Sum(fbsd.Excellent), Sum(fbsd.Average), Sum(fbsd.Poor) From FeedBackSummaryDaily fbsd Join Facility f ON f.FacilityId = fbsd.FacilityId Join [Space] s ON s.Spaceid = fbsd.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbsd.[date] BETWEEN '2024-04-01' and '2024-04-30'"
"What is the feedback overview for Terminals A, B, C, and E for July 2024?","Select f.FacilityName ,Sum(fbsd.Excellent), Sum(fbsd.Average), Sum(fbsd.Poor), Sum(fbsd.Total) From FeedBackSummaryDaily fbsd Join Facility f ON f.FacilityId = fbsd.FacilityId Join [Space] s ON s.Spaceid = fbsd.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbsd.[date] BETWEEN '2024-07-01' and '2024-07-31' Group By f.FacilityName Order By F.FacilityName"
"Which issue received the maximum feedback across all terminals for July 2024?","Select  si.Issue, fbisd.IssueId, Sum(fbisd.Total) from FeedBackIssueSummaryDaily fbisd Join Facility f ON f.FacilityId = fbisd.FacilityId Join [Space] s ON s.Spaceid = fbisd.SpaceId JOIn SatisfactionIssuesMaster si ON si.id = fbisd.IssueId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbisd.[date] BETWEEN '2024-07-01' and '2024-07-31' GROUP By si.Issue, fbisd.IssueId Order BY 3 desc"
"Which room received the most excellent feedback across all terminals for July 2024?","Select Top 1 s.SpaceName  ,Sum(fbsd.Excellent) as MostExcellentFeedback From FeedBackSummaryDaily fbsd Join Facility f ON f.FacilityId = fbsd.FacilityId Join [Space] s ON s.Spaceid = fbsd.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbsd.[date] BETWEEN '2024-07-01' and '2024-07-31' Group By s.SpaceName Order By MostExcellentFeedback Desc"
"Which room received the most negative feedback across all terminals for July 2024?","Select Top 1 s.SpaceName, Sum(fbsd.Poor) as MostNegativeFeedback From FeedBackSummaryDaily fbsd Join Facility f ON f.FacilityId = fbsd.FacilityId Join [Space] s ON s.Spaceid = fbsd.SpaceId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbsd.[date] BETWEEN '2024-07-01' and '2024-07-31' Group By s.SpaceName Order By MostNegativeFeedback Desc"
"Which restrooms received the most excellent rating in each terminal for July 2024?","WITH FeedbackSummary AS ( SELECT f.FacilityName, s.SpaceName, SUM(fbsd.Excellent) AS MostExcellentFeedback FROM FeedBackSummaryDaily fbsd JOIN Facility f ON f.FacilityId = fbsd.FacilityId JOIN [Space] s ON s.SpaceId = fbsd.SpaceId WHERE f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') AND fbsd.[date] BETWEEN '2024-07-01' AND '2024-07-31' GROUP BY  f.FacilityName, s.SpaceName),MaxFeedback AS ( SELECT FacilityName,  MAX(MostExcellentFeedback) AS MaxExcellentFeedback FROM FeedbackSummary GROUP BY FacilityName) SELECT fs.FacilityName,  fs.SpaceName, fs.MostExcellentFeedback FROM  FeedbackSummary fs JOIN  MaxFeedback mf  ON fs.FacilityName = mf.FacilityName  AND fs.MostExcellentFeedback = mf.MaxExcellentFeedback ORDER BY  fs.FacilityName;"
"Which restrooms received the most poor rating in each terminal for July 2024?","WITH FeedbackSummary AS ( SELECT f.FacilityName, s.SpaceName, SUM(fbsd.Poor) AS MostPoorFeedback FROM FeedBackSummaryDaily fbsd JOIN Facility f ON f.FacilityId = fbsd.FacilityId JOIN [Space] s ON s.SpaceId = fbsd.SpaceId WHERE f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') AND fbsd.[date] BETWEEN '2024-07-01' AND '2024-07-31' GROUP BY  f.FacilityName, s.SpaceName),MaxFeedback AS ( SELECT FacilityName,  MAX(MostPoorFeedback) AS MaxPoorFeedback FROM FeedbackSummary GROUP BY FacilityName) SELECT fs.FacilityName,  fs.SpaceName, fs.MostPoorFeedback FROM  FeedbackSummary fs JOIN  MaxFeedback mf  ON fs.FacilityName = mf.FacilityName  AND fs.MostPoorFeedback = mf.MaxPoorFeedback ORDER BY  fs.FacilityName;"
"What satisfaction issues were reported in Terminals A, B, C, and E in July 2024?","Select f.FacilityName, si.Issue, Sum(fbisd.Total) from FeedBackIssueSummaryDaily fbisd Join Facility f ON f.FacilityId = fbisd.FacilityId Join [Space] s ON s.Spaceid = fbisd.SpaceId JOIn SatisfactionIssuesMaster si ON si.id = fbisd.IssueId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbisd.[date] BETWEEN '2024-07-01' and '2024-07-31' GROUP By f.FacilityName, si.Issue Order BY f.FacilityName, si.Issue "
"Which restrooms had reoccurring satisfaction issues in Terminals A, B, C, and E for April 2024?","Select   f.FacilityName , si.Issue, S.SpaceName , Sum(fbisd.Total) as Count from FeedBackIssueSummaryDaily fbisd Join Facility f ON f.FacilityId = fbisd.FacilityId Join [Space] s ON s.Spaceid = fbisd.SpaceId JOIn SatisfactionIssuesMaster si ON si.id = fbisd.IssueId Where f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') and fbisd.[date] BETWEEN '2024-04-01' and '2024-04-30' GROUP By f.FacilityName , s.SpaceName , si.Issue HAVING Sum(fbisd.Total)  > 1 Order BY   4 desc"
"Which are the top 5 restrooms with the most negative feedback across all terminals for July 2024?","WITH FeedbackSummary AS ( SELECT  f.FacilityName,  s.SpaceName,  SUM(fbsd.Poor) AS MostNegativeFeedback FROM  FeedBackSummaryDaily fbsd JOIN  Facility f ON f.FacilityId = fbsd.FacilityId JOIN  [Space] s ON s.SpaceId = fbsd.SpaceId WHERE  f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') AND fbsd.[date] BETWEEN '2024-07-01' AND '2024-07-31' GROUP BY   f.FacilityName, s.SpaceName), RankedFeedback AS ( SELECT  fs.FacilityName, fs.SpaceName, fs.MostNegativeFeedback, ROW_NUMBER() OVER (PARTITION BY fs.FacilityName ORDER BY fs.MostNegativeFeedback DESC, fs.SpaceName Desc) AS FeedbackRank FROM  FeedbackSummary fs) SELECT  FacilityName,   SpaceName,  MostNegativeFeedback FROM RankedFeedback WHERE FeedbackRank <= 5 ORDER BY FacilityName, FeedbackRank;"
"Which are the top 5 restrooms with the most positive feedback across all terminals for July 2024?","WITH FeedbackSummary AS ( SELECT  f.FacilityName,  s.SpaceName,  SUM(fbsd.Excellent) AS MostExcellentFeedback FROM  FeedBackSummaryDaily fbsd JOIN  Facility f ON f.FacilityId = fbsd.FacilityId JOIN  [Space] s ON s.SpaceId = fbsd.SpaceId WHERE  f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') AND fbsd.[date] BETWEEN '2024-07-01' AND '2024-07-31' GROUP BY   f.FacilityName, s.SpaceName), RankedFeedback AS ( SELECT  fs.FacilityName, fs.SpaceName, fs.MostExcellentFeedback, ROW_NUMBER() OVER (PARTITION BY fs.FacilityName ORDER BY fs.MostExcellentFeedback DESC, fs.SpaceName desc) AS FeedbackRank FROM  FeedbackSummary fs) SELECT  FacilityName,   SpaceName,  MostExcellentFeedback FROM RankedFeedback WHERE FeedbackRank <= 5 ORDER BY FacilityName, FeedbackRank;"
"What are the feedback percentages for all restrooms in Terminals A, B, C, and E for July 2024?","SELECT  f.FacilityName, s.SpaceName, CASE  WHEN SUM(fbsd.Total) = 0 THEN '0%' ELSE CAST(ROUND((CAST(SUM(fbsd.Excellent) AS FLOAT) / CAST(SUM(fbsd.Total) AS FLOAT)) * 100, 0) AS VARCHAR) + '%' END AS ExcellentPercentage, CASE  WHEN SUM(fbsd.Total) = 0 THEN '0%' ELSE CAST(ROUND((CAST(SUM(fbsd.Average) AS FLOAT) / CAST(SUM(fbsd.Total) AS FLOAT)) * 100, 0) AS VARCHAR) + '%' END AS AveragePercentage, CASE  WHEN SUM(fbsd.Total) = 0 THEN '0%' ELSE CAST(ROUND((CAST(SUM(fbsd.Poor) AS FLOAT) / CAST(SUM(fbsd.Total) AS FLOAT)) * 100, 0) AS VARCHAR) + '%' END AS PoorPercentage FROM  FeedBackSummaryDaily fbsd JOIN Facility f ON f.FacilityId = fbsd.FacilityId JOIN [Space] s ON s.Spaceid = fbsd.SpaceId WHERE f.FacilityName IN ('Terminal A', 'Terminal B', 'Terminal C', 'Terminal E') AND fbsd.[date] BETWEEN '2024-07-01' AND '2024-07-31' GROUP BY   f.FacilityName, s.SpaceName ORDER BY  f.FacilityName;"
"show the restroom with high usage in dec 2024","SELECT TOP 1 f.FacilityName, s.SpaceName, SUM(od.Cnt) AS TotalOccupancy FROM OccupancyDaily od JOIN Facility f ON f.FacilityId = od.FacilityId JOIN [Space] s ON s.SpaceId = od.SpaceId WHERE od.date BETWEEN '2024-12-01' AND '2024-12-31' GROUP BY f.FacilityName, s.SpaceName ORDER BY TotalOccupancy DESC;"

"Top 5 slowest restrooms in dec 2024","WITH RestroomSummary AS (SELECT o.FacilityId, s.SpaceName, o.RoomName, SUM(o.Cnt) AS TotalOccupancy FROM OccupancyDaily o JOIN [Space] s ON o.SpaceId = s.SpaceId WHERE o.date BETWEEN '2024-12-01' AND '2024-12-31' AND o.RoomName NOT LIKE '%N' GROUP BY o.FacilityId, s.SpaceName, o.RoomName), RankedRestrooms AS (SELECT rs.FacilityId, rs.SpaceName, rs.RoomName, rs.TotalOccupancy, ROW_NUMBER() OVER (ORDER BY rs.TotalOccupancy ASC) AS RestroomRank FROM RestroomSummary rs) SELECT TOP 5 FacilityId, SpaceName, RoomName, TotalOccupancy FROM RankedRestrooms ORDER BY RestroomRank;"

show the hourly satisfaction trend for terminal C on 2nd jan 2025,"SELECT f.FacilityName, fbd.date, fbd.Total, fbd.Excellent, fbd.Average, fbd.Poor FROM FeedBackSummaryDaily fbd JOIN Facility f ON f.FacilityId = fbd.FacilityId WHERE f.FacilityName = 'Terminal C' AND fbd.date = '2025-01-02'"

show the hourly satisfaction trend for terminal C on 2nd jan 2025,"SELECT DATEPART(HOUR, fbd.CreatedOn) as Hour, fbd.Excellent, fbd.Average, fbd.Poor 
FROM FeedBackSummaryDaily fbd 
JOIN Facility f ON fbd.FacilityId = f.FacilityId 
WHERE f.FacilityName = 'Terminal C' 
AND fbd.date = '2025-01-02' 
ORDER BY Hour;"


Top 10 busiest restrooms by terminal pre-security and post-security,"SELECT f.FacilityName, s.SpaceName, SUM(ocs.occupancy) AS TotalOccupancy, CASE WHEN s.Secure = 1 THEN 'Post Security' ELSE 'Pre Security' END AS SecurityClassification FROM OccupancyCleaningSummary ocs JOIN Facility f ON f.FacilityId = ocs.FacilityId JOIN Space s ON s.SpaceId = ocs.SpaceId GROUP BY f.FacilityName, s.SpaceName, s.Secure ORDER BY TotalOccupancy DESC;"

List the names of those along with their Jan 2025 usages,"SELECT DISTINCT od.RoomName, SUM(od.Cnt) AS Usage FROM Facility f JOIN OccupancyDaily od ON f.FacilityId = od.FacilityId WHERE f.FacilityName = 'Terminal C' AND od.[date] BETWEEN '2025-01-01' AND '2025-01-31' GROUP BY od.RoomName;"


How many unique rooms in Terminal C?,SELECT COUNT(DISTINCT s.SpaceId) AS UniqueRooms FROM Facility f JOIN [Space] s ON f.FacilityId = s.FacilityId WHERE f.FacilityName = 'Terminal C';

Show the weekly satisfaction issues for terminal A,"SELECT DATEPART(WEEK, fbsd.date) AS Week, sim.Issue, SUM(fbsd.Total) AS TotalIssues FROM FeedBackIssueSummaryDaily fbsd JOIN Facility f ON f.FacilityId = fbsd.FacilityId JOIN SatisfactionIssuesMaster sim ON sim.id = fbsd.IssueId WHERE f.FacilityName = 'Terminal A' GROUP BY DATEPART(WEEK, fbsd.date), sim.Issue ORDER BY Week;"

Show the weekly satisfaction trend terminal c in dec 2024,"SELECT DATEPART(WEEK, fbd.date) AS Week, SUM(fbd.Total) AS TotalFeedback, SUM(fbd.Excellent) AS ExcellentFeedback, SUM(fbd.Average) AS AverageFeedback, SUM(fbd.Poor) AS PoorFeedback FROM FeedBackSummaryDaily fbd JOIN Facility f ON f.FacilityId = fbd.FacilityId WHERE f.FacilityName = 'Terminal C' AND fbd.date BETWEEN '2024-12-01' AND '2024-12-31' GROUP BY DATEPART(WEEK, fbd.date) ORDER BY Week;"

Week over Week usage Comparison in Terminal 3 for Dec 2024,"SELECT DATEPART(WEEK, od.date) AS Week, f.FacilityName, SUM(od.Cnt) AS TotalOccupancy FROM OccupancyDaily od JOIN Facility f ON f.FacilityId = od.FacilityId WHERE f.FacilityName = 'Terminal 3' AND od.date BETWEEN '2024-12-01' AND '2024-12-31' GROUP BY DATEPART(WEEK, od.date), f.FacilityName ORDER BY Week;"

Plot a graph for Which restrooms had reoccurring satisfaction issues in August 2024?,"SELECT f.FacilityName, s.SpaceName, si.Issue, SUM(fbisd.Total) AS Count FROM FeedBackIssueSummaryDaily fbisd JOIN Facility f ON f.FacilityId = fbisd.FacilityId JOIN [Space] s ON s.SpaceId = fbisd.SpaceId JOIN SatisfactionIssuesMaster si ON si.id = fbisd.IssueId WHERE MONTH(fbisd.[date]) = 8 AND YEAR(fbisd.[date]) = 2024 GROUP BY f.FacilityName, s.SpaceName, si.Issue HAVING SUM(fbisd.Total) > 1 ORDER BY Count DESC;"

Show the hourly level details of A1-1L Restroom with poor feedback in dec 2024,"SELECT ocs.hours, SUM(ocs.occupancy) AS TotalOccupancy, f.FacilityName, ocs.RoomName FROM OccupancyCleaningSummary ocs JOIN FeedBackSummaryDaily fs ON ocs.FacilityId = fs.FacilityId AND ocs.SpaceId = fs.SpaceId AND ocs.LevelId = fs.levelId AND ocs.SiteId = fs.SiteId JOIN Facility f ON f.FacilityId = ocs.FacilityId WHERE ocs.RoomName = 'A1-1L' AND fs.Poor > 0 AND fs.date BETWEEN '2024-12-01' AND '2024-12-31' GROUP BY ocs.hours, f.FacilityName, ocs.RoomName ORDER BY ocs.hours;"

Can you compare the satisfaction issues mentioned in terminal E with those in terminal 2(time period : 10th -16th Feb 2025)),"SELECT fbsd.date, f.FacilityName, sim.Issue, SUM(fbsd.Total) AS TotalIssues FROM FeedBackIssueSummaryDaily fbsd JOIN Facility f ON f.FacilityId = fbsd.FacilityId JOIN SatisfactionIssuesMaster sim ON sim.id = fbsd.IssueId WHERE f.FacilityName = 'Terminal 2' AND fbsd.date BETWEEN '2025-02-10' AND '2025-02-16' GROUP BY fbsd.date, f.FacilityName, sim.Issue ORDER BY fbsd.date;"
Show the observed spike count in terminal A for may 2025,"SELECT ocs.[dateTime], ocs.Occupancy AS Spike_Count, s.SpaceName FROM OccupancyCleaningSummary ocs JOIN Facility f ON f.FacilityId = ocs.FacilityId JOIN [Space] s ON s.SpaceId = ocs.SpaceId WHERE f.FacilityName = 'Terminal A' AND ocs.[dateTime] BETWEEN '2025-05-01' AND '2025-05-31' AND ocs.Occupancy >= 2000 ORDER BY Spike_Count DESC;"

Show the observed spike count in terminal A for may 2025,"SELECT ocs.[dateTime], ocs.Occupancy AS Spike_Count, s.SpaceName FROM OccupancyCleaningSummary ocs JOIN Facility f ON f.FacilityId = ocs.FacilityId JOIN [Space] s ON s.SpaceId = ocs.SpaceId WHERE f.FacilityName = 'Terminal A' AND ocs.[dateTime] BETWEEN '2025-05-01' AND '2025-05-31' AND ocs.Occupancy >= 2000 ORDER BY Spike_Count DESC;"
